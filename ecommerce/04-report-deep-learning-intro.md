
# Linee guida per il lancio di un e-commerce di Kombucha (B2C/B2B)

Questo report dettagliato include tutti gli step tecnici e legali minimi per il rilascio sicuro dell’e-commerce, le figure professionali coinvolte, e le raccomandazioni per formalizzare accordi tra le parti.

Destinato all’uso interno del team di sviluppo.

Riassume in modo chiaro i requisiti legali e tecnici fondamentali, le figure professionali necessarie, un possibile modello contrattuale tra sviluppatore e titolare P.IVA, le misure di sicurezza essenziali, nonché raccomandazioni per la scalabilità futura e la collaborazione tra le parti coinvolte.

## Requisiti indispensabili: aspetti legali e tecnici

### Requisiti legali fondamentali
- **Normativa e-commerce italiana:** il venditore online deve rispettare il D.Lgs. 70/2003 (servizi della società dell’informazione) e il Codice del Consumo (D.Lgs. 206/2005) che impongono obblighi informativi sul venditore (ragione sociale, partita IVA, recapiti), descrizione prodotti, prezzi, termini di spedizione e politiche di reso (recesso entro 14 giorni per B2C). Bisogna predisporre termini e condizioni di vendita chiari e aggiornati.
- **Privacy e protezione dati (GDPR):** come **titolare del trattamento** dei dati degli utenti, va pubblicata una *Privacy Policy* conforme al GDPR. Devono essere predisposte informative specifiche per la raccolta dati (clienti, contatti, newsletter). I cookie identificativi (es. session cookie o traccianti di terze parti) sono considerati dati personali e richiedono consenso esplicito dell’utente ([Cookies, the GDPR, and the ePrivacy Directive - GDPR.eu](https://gdpr.eu/cookies/#:~:text=What%20these%20two%20lines%20are,as%20long%20as%20they%20receive)). In particolare, l’uso di servizi di pagamento come Stripe può generare cookie di tracking: è quindi obbligatorio mostrare un banner cookie con opt-in preventivo ([Stripe and the GDPR – How to be compliant | test - iubenda help](https://www.iubenda.com/en/help/110753-stripe-and-the-gdpr-how-to-be-compliant-test#:~:text=Yes%2C%20Stripe%20may%20use%20tracking,laws%20apply%20to%20you%20here)) ([Cookies, the GDPR, and the ePrivacy Directive - GDPR.eu](https://gdpr.eu/cookies/#:~:text=What%20these%20two%20lines%20are,as%20long%20as%20they%20receive)).
- **Accessibilità e normative sul sito:** il sito deve essere accessibile secondo la Legge Stanca (Legge 4/2004) e successive linee guida (WCAG). Inoltre, siccome si vendono prodotti alimentari (kombucha), verificare eventuali certificazioni o obblighi sanitari/hygienico-sanitari per la vendita di bevande fermentate (etichette e informazioni nutrizionali, HACCP se necessario).
- **Commercio elettronico e fiscalità:** come P.IVA titolare si applicano obblighi fiscali come la fatturazione elettronica (soprattutto B2B) e gli adempimenti IVA, anche in caso di vendite intracomunitarie. Devono essere calcolate correttamente tasse, IVA e eventuali dazi se si esporta. Il calcolo del checkout deve prevedere la *Strong Customer Authentication* (autenticazione forte) imposta dalla normativa PSD2 per i pagamenti online in Europa.
- **Sicurezza dei pagamenti:** tutti i pagamenti con carta devono rispettare lo standard **PCI DSS**. Stripe semplifica la conformità gestendo in modo sicuro i dati sensibili delle carte, ma è bene sapere che «tutte le aziende che accettano pagamenti con carta di credito devono conformarsi allo standard PCI DSS» ([What is PCI DSS compliance? 12 requirements | Stripe](https://stripe.com/guides/pci-compliance#:~:text=All%20businesses%20that%20accept%20credit,with%20this%20framework%2C%20businesses%20can)). Il sistema deve quindi utilizzare integrazioni certificate (es. Stripe Elements/Checkout) in modo che il server non memorizzi direttamente i dati delle carte.

### Requisiti tecnici fondamentali
- **Connessione sicura (HTTPS):** il sito deve essere servito esclusivamente via HTTPS (certificati SSL/TLS). Aruba offre certificati SSL gratuiti su hosting, da abilitare subito. Utilizzare **HSTS** per inibire connessioni non sicure.
- **Hosting affidabile:** Aruba Cloud o simili sono utilizzati: assicurarsi che l’infrastruttura supporti adeguate risorse e backup. Configurare separatamente ambienti di sviluppo, staging e produzione (per esempio con branch Git o workspace distinti) e utilizzando **CI/CD** (integrazione continua) per i rilasci automatizzati.
- **Database Firebase chiuso:** al momento il DB Firebase è open/relaxed. È indispensabile definire *Security Rules* in Firestore/Realtimedb per bloccare accessi non autorizzati: abilitare l’autenticazione Firebase e regole che consentano lettura/scrittura solo a utenti autenticati o ruoli specifici. «Le regole di sicurezza Firebase offrono una protezione solida e completamente personalizzabile per i tuoi dati… mettendo al sicuro i tuoi dati e proteggendo la tua app da utenti malintenzionati» ([Inizia a utilizzare le regole di sicurezza di Firebase  |  Firebase Realtime Database](https://firebase.google.com/docs/database/security/get-started?hl=it#:~:text=Le%20regole%20di%20sicurezza%20Firebase,tua%20app%20da%20utenti%20malintenzionati)).
- **Gestione chiavi e segreti:** tutte le chiavi sensibili (es. Stripe secret key) vanno conservate lato server (Heroku Config Vars), mai nel codice pubblico o nel frontend. Impostare rigide **CORS policy** per l’API e usare HTTPS con certificato valido.
- **Backup e disaster recovery:** configurare backup regolari del database e del codice sorgente. Firebase offre backup schedulati (“scheduled backups”) per Firestore: «Use backups to protect your data from… accidental data deletion» ([Back up and restore data  |  Firestore  |  Firebase](https://firebase.google.com/docs/firestore/backups#:~:text=This%20page%20describes%20how%20to,or%20from%20accidental%20data%20deletion)). Pianificare esportazioni periodiche dei dati utente/prodotti. Assicurarsi che Heroku (o l’hosting scelto) abbia snapshot o soluzioni di ripristino.
- **Logging e monitoraggio:** abilitare logging di errori e accessi (ad es. Heroku Logplex, Sentry, CloudWatch). Prevedere alert automatici per errori critici o downtime. Monitorare l’uptime (es. con Pingdom, UptimeRobot). Tenere traccia degli eventi critici (ad es. acquisti, login falliti) in log centralizzati per audit.
- **Politiche di sicurezza Web:** implementare **Content Security Policy (CSP)** per impedire XSS e attacchi di iniezione. OWASP raccomanda CSP come ulteriore livello di difesa: «Una CSP robusta fornisce un secondo livello di protezione contro diverse vulnerabilità, specialmente XSS» ([Content Security Policy - OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html#:~:text=A%20strong%20CSP%20provides%20an,for%20an%20attacker%20to%20exploit)). Configurare CORS, X-Frame-Options, XSS protection header e disabilitare funzioni rischiose (es. `eval`).
- **Gestione pagamenti Stripe:** utilizzare le API di Stripe (PaymentIntent) seguendo le best practice ufficiali (es. creare PaymentIntent nel backend appena inizia il checkout) e abilitare **3D Secure (SCA)** per l’Europa. Attivare Stripe Radar (protezione antifrode). Non memorizzare dati di pagamento sensibili sul nostro server.

## Figure professionali necessarie

È utile coinvolgere almeno i seguenti ruoli per una gestione solida del progetto:

| **Figura professionale**           | **Competenze / Responsabilità**                                                                                          |
|-----------------------------------|-------------------------------------------------------------------------------------------------------------------------|
| **Sviluppatore Full-Stack**       | Implementazione frontend (React/Vite) e backend (Node.js/Stripe). Conoscenza Firebase, API REST, sicurezza app.         |
| **DevOps / Sistemista**           | Configurazione server/hosting (Aruba, Heroku), deployment, monitoraggio, gestione backup, sicurezza infrastruttura.    |
| **Legale (e-commerce)**          | Redazione Termini e Condizioni, Contratti con fornitori/clienti (specialmente per vendite B2B), normative commerciali.   |
| **Consulente Privacy (DPO)**     | Assicurazione compliance GDPR, redazione Privacy Policy e Cookie Policy, valutazioni d’impatto sulla privacy (DPIA).    |
| **Responsabile Sicurezza (CISO)** | Revisione sicurezza IT, gestione vulnerabilità, verifica di standard come PCI-DSS e protocolli crittografici.           |
| **Designer UI/UX**               | Progettazione interfaccia user-friendly e responsive, ottimizzazione usabilità ed accessibilità (WCAG).                 |
| **Tester/QA**                    | Test funzionali e di sicurezza (penetration test base), verifica flussi di acquisto, stress test e controllo qualità.   |
| **Commerciale/Marketing**        | Strategia di marketing B2C/B2B, organizzazione eventi sul territorio, gestione canali social e pubblicità online.       |
| **Commercialista/Consulente Fiscale** | Consulenza fiscale-contabile sull’e-commerce, gestione fatturazione elettronica, adempimenti IVA (B2B, export). |

*(In progetti ridotti alcuni ruoli possono essere coperti da consulenti esterni o da collaboratori con competenze multiple.)*

## Modello contrattuale consigliato

Si consiglia di formalizzare un **contratto di servizi/consulenza** tra lo sviluppatore (fornitore di servizi) e la titolare P.IVA (committente) che stabilisca con chiarezza responsabilità e obblighi. Elementi chiave da includere:
- **Oggetto e ambito:** definire esattamente le funzionalità da consegnare (MVP iniziale, plugin, personalizzazioni Stripe, integrazioni eventi, ecc.) e i tempi di consegna.
- **Termini di rilascio e verifica:** prevedere procedure di revisione e accettazione delle consegne (milestone, testing, collaudo), oltre a tempistiche di upgrade futuri.
- **Proprietà intellettuale:** in base all’art. 2232 c.c. e al diritto d’autore, il software sviluppato sotto commissione appartiene al committente per impostazione di legge, a meno di clausole diverse. Dichiarare esplicitamente che tutti i diritti d’uso e di modifica del codice sorgente sono ceduti alla P.IVA titolare al termine del progetto.
- **Manutenzione e SLA:** indicare livelli minimi di assistenza post-lancio (Service Level Agreement), tempi di risposta per bug fixing, aggiornamenti minori e maggiori. Stabilire il compenso orario/giornaliero per interventi extra.
- **Pagamenti e fatturazione:** definire modalità e scadenze di pagamento (ad es. acconto, saldo finale, pagamenti rateali), riferimenti di fatturazione elettronica e IVA.
- **Garanzie e responsabilità:** inserire limitazioni di responsabilità in caso di malfunzionamenti non imputabili allo sviluppatore, esclusioni di garanzie tacite e definire cosa fare in caso di contenzioso (ad es. arbitrato o foro competente).
- **Durata e recesso:** regole di durata del contratto, eventuali penali per ritardi o recesso anticipato di una delle parti.
- **Sicurezza e riservatezza:** obblighi di riservatezza/NDA sui dati aziendali e sul codice, specie se contiene know-how proprietario.
- **Collaborazione con terzi:** nel contratto va chiarito il ruolo dell’azienda madre (azionista al 20%) – ad es. se ha voce in capitolo sulle decisioni tecniche o commerciali – o eventuali linee guida comuni da rispettare.

Un esempio di struttura contrattuale potrebbe essere un **contratto di prestazione d’opera intellettuale** o collaborazione con P.IVA, integrato da un allegato **SLA** e da clausole dedicate a proprietà del software e assistenza. In ogni caso è fondamentale un parere legale per redigere i termini in modo conforme al diritto italiano.

## Misure di sicurezza da implementare

Per ridurre i rischi e rendere il sito robusto, seguire questi step:

- **Cierre del DB Firebase:** configurare *Security Rules* che ne limitino l’accesso solo agli utenti autenticati e ai ruoli appropriati (es. amministratori). In alternativa usare un proxy API che interagisca col DB al posto del client diretto. L’obiettivo è garantire che nessuno possa leggere/scrivere dati sensibili senza autorizzazione ([Inizia a utilizzare le regole di sicurezza di Firebase  |  Firebase Realtime Database](https://firebase.google.com/docs/database/security/get-started?hl=it#:~:text=Le%20regole%20di%20sicurezza%20Firebase,tua%20app%20da%20utenti%20malintenzionati)).
- **Protezione delle chiavi Stripe:** mantenere le chiavi segrete (chiave privata, webhooks secret) sui server (Heroku Config Vars) e non nel codice front-end. Non committarle nel repository. Verificare le regole di CORS sulla rotta di pagamento.
- **HTTPS e certificati HSTS:** forzare sempre HTTPS; abilitare HSTS (preload) per evitare downgrade. Aruba supporta certificati SSL/TLS. Disabilitare HTTP legacy (porta 80).
- **Politiche CSP e XSS:** impostare header CSP restrittivi (es. `Content-Security-Policy: default-src 'self'; script-src 'self' ...`) per prevenire injection di script esterni. CSP «fornisce un ulteriore livello di difesa contro vulnerabilità, soprattutto XSS» ([Content Security Policy - OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html#:~:text=A%20strong%20CSP%20provides%20an,for%20an%20attacker%20to%20exploit)). Utilizzare anche l’header `X-Frame-Options: DENY` o direttiva CSP `frame-ancestors 'none'` per evitare clickjacking.
- **Validazione input e password:** applicare controlli di validità sui dati inseriti (server-side) e proteggere login/registrazione con rate-limiting e eventuale CAPTCHA. Forzare password robuste. Proteggere endpoint sensibili con verifica CSRF e token.
- **Backup regolari:** programmare esportazioni/database dump frequenti. Cloud Firestore supporta backup schedulati giornalieri o settimanali ([Back up and restore data  |  Firestore  |  Firebase](https://firebase.google.com/docs/firestore/backups#:~:text=This%20page%20describes%20how%20to,or%20from%20accidental%20data%20deletion)). Conservare backup in luogo sicuro (offline o altro bucket cloud). Testare periodicamente il restore.
- **Logging e monitoring:** integrare servizi come Sentry o Loggly per tracciare errori runtime JavaScript/Node. Archiviare log dei pagamenti falliti/successi (webhook Stripe). Monitorare metriche di utilizzo CPU, memoria dell’app su Heroku. Configurare alert (email, Slack) su errori critici.
- **Aggiornamenti e dipendenze:** tenere aggiornato il framework e le librerie (npm audit). Rivedere periodicamente le dipendenze di React/Node per vulnerabilità note. Seguire i bollettini di sicurezza.
- **Misure anti-frode:** attivare Stripe Radar e limiti transazionali di sicurezza (es. numero tentativi, blocco IP sospetti). Considerare il monitoraggio manuale per ordini anomali.
- **Cookie e tracking:** implementare banner cookie con opt-in esplicito. Dichiarare chiaramente nell’Informativa Cookie quali dati sono raccolti (compresi quelli da Stripe o Analytics) e fornire meccanismi di opt-out come previsto dal GDPR ([Cookies, the GDPR, and the ePrivacy Directive - GDPR.eu](https://gdpr.eu/cookies/#:~:text=What%20these%20two%20lines%20are,as%20long%20as%20they%20receive)) ([Stripe and the GDPR – How to be compliant | test - iubenda help](https://www.iubenda.com/en/help/110753-stripe-and-the-gdpr-how-to-be-compliant-test#:~:text=Yes%2C%20Stripe%20may%20use%20tracking,laws%20apply%20to%20you%20here)).

## Piano tecnico e legale scalabile

Per evolvere dall’MVP a una piattaforma più strutturata, si raccomanda:

- **Architettura modulare:** mantenere separati i moduli front-end, back-end e servizi esterni. Ad esempio, il frontend React può consumare più servizi (API microservizi per prodotti, utenti, ordini). Ciò faciliterà in futuro l’aggiunta di nuovi canali (app mobile, servizi B2B dedicati).
- **Ambienti di test/staging:** creare ambienti replicanti la produzione per test automatici/prerelease. Usare CI/CD (es. GitHub Actions) per deploy automatici su staging e produzione dopo approvazione.
- **Scalabilità cloud:** monitorare l’uso delle risorse su Heroku; pianificare di passare eventualmente a piani superiori o a servizi dedicati (AWS, GCP) se il traffico cresce. Prevedere l’uso di CDN (Aruba CDN o Cloudflare) per servire contenuti statici e ridurre latenza.
- **Manutenzione e aggiornamenti:** stabilire un processo formale di rilascio (release management) con versioning semantico, changelog e rollback procedure. Documentare il codice e le API interne.
- **Espansione legale:** se previsto espandersi in altri Paesi UE, tenere conto delle normative locali (ad es. IVA OSS per vendite UE B2C, localizzazione lingua, normative alimentari specifiche). Rimanere aggiornati su evoluzioni legislazione e-commerce (es. ePrivacy Regulation).
- **Pianificazione contrattuale:** rivedere annualmente il contratto con lo sviluppatore e i fornitori (hosting, servizi) per includere nuovi requisiti di servizio (SLA più stringenti, Supporto 24/7, ecc.). Prevedere clausole di rinnovo e pagamento ricorrente per l’assistenza continuativa.
- **Protezione di proprietà intellettuale:** registrare marchi (nome brand, logo) e assicurare che il codice proprietario sia sempre chiaramente assegnato alla P.IVA. Valutare in prospettiva la costituzione di una società dedicata se il progetto cresce molto, per gestire quote e responsabilità.

## Collaborazione futura: developer, azienda madre, titolare P.IVA

Per coordinare efficacemente i tre stakeholder principali, consigliamo:

- **Ruoli e responsabilità chiari:** stilare un documento interno dove si definiscono i compiti di ognuno. Ad esempio: la titolare P.IVA decide esigenze di business e offre supporto logistico (prodotti/eventi); l’azienda madre (20% quote) contribuisce con strategia finanziaria o di marketing nazionale; lo sviluppatore gestisce la manutenzione tecnica. Un organigramma schematizzato può aiutare.
- **Comunicazione e riunioni periodiche:** stabilire incontri regolari (ad es. settimanali o bisettimanali) tra developer e titolare P.IVA, con partecipazione saltuaria dell’azienda madre, per fare il punto su sviluppo, vendite e marketing. Usare strumenti condivisi (project board Trello/Jira, chat Slack) per tracciabilità delle attività.
- **Obiettivi e roadmap condivisi:** definire obiettivi a breve e lungo termine (es. numero di vendite mensili, numero di eventi organizzati, integrazioni software). Creare una roadmap dove sono visibili gli aggiornamenti pianificati (nuove funzionalità, refactoring, campagne).
- **Accordi economici trasparenti:** se l’azienda madre trattiene il 20%, stabilire come questo impatta sugli investimenti e sui profitti. Ad esempio, se la P.IVA copre i costi di sviluppo, definire se e come l’azienda madre concorre. Redigere eventuali accordi parasociali per la ripartizione degli utili futuri.
- **Qualità e formazione:** garantire che la titolare P.IVA o il suo staff tecnico siano formati sull’uso della piattaforma (per gestire ordini B2B, inventario, strumenti marketing). Il developer può fornire sessioni di training o documentazione.
- **Adattabilità:** concordare fin da ora che eventuali futuri sviluppi (feature richieste da azienda madre o cambi di strategia) saranno valutati insieme, con flessibilità di aggiornare il piano contrattuale o i budget. Prevedere un meccanismo di condivisione delle decisioni (es. assemblea periodica) per le decisioni chiave.

---

**Fonti e riferimenti:** normativa e best practice sono state ricavate da documentazione ufficiale (GDPR, Stripe, OWASP, Firebase, etc.) come descritto nelle note ([Cookies, the GDPR, and the ePrivacy Directive - GDPR.eu](https://gdpr.eu/cookies/#:~:text=What%20these%20two%20lines%20are,as%20long%20as%20they%20receive)) ([What is PCI DSS compliance? 12 requirements | Stripe](https://stripe.com/guides/pci-compliance#:~:text=All%20businesses%20that%20accept%20credit,with%20this%20framework%2C%20businesses%20can)) ([Inizia a utilizzare le regole di sicurezza di Firebase  |  Firebase Realtime Database](https://firebase.google.com/docs/database/security/get-started?hl=it#:~:text=Le%20regole%20di%20sicurezza%20Firebase,tua%20app%20da%20utenti%20malintenzionati)) ([Content Security Policy - OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html#:~:text=A%20strong%20CSP%20provides%20an,for%20an%20attacker%20to%20exploit)) ([Back up and restore data  |  Firestore  |  Firebase](https://firebase.google.com/docs/firestore/backups#:~:text=This%20page%20describes%20how%20to,or%20from%20accidental%20data%20deletion)) ([Stripe and the GDPR – How to be compliant | test - iubenda help](https://www.iubenda.com/en/help/110753-stripe-and-the-gdpr-how-to-be-compliant-test#:~:text=Yes%2C%20Stripe%20may%20use%20tracking,laws%20apply%20to%20you%20here)). Queste linee guida servono da base strutturale replicabile per progetti e-commerce simili in futuro, assicurando conformità legale, sicurezza tecnica e chiarezza organizzativa.